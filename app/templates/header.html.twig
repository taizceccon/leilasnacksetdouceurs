<header class="bg-creme dark:bg-[#3A322F]">

    <!-- MOBILE: Version responsive spÃ©cifique -->
    <div class="md:hidden flex flex-col items-center text-center space-y-4 w-full">

      <!-- Logo centrÃ© -->
      <a href="{{ path('app_home') }}">
        <img src="/images/logo.png" alt="Logo Leila Snacks et Douceurs" width="150"  height="150" class="mx-auto rounded" />
      </a>

      <!-- Bouton burger -->
      <button id="burger-button" aria-expanded="false" aria-controls="mobile-menu" class="hover:text-bleuMenthe transition" aria-label="Ouvrir le menu">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2" role="img" aria-hidden="true">
          <line x1="4" y1="6" x2="20" y2="6" />
          <line x1="4" y1="12" x2="20" y2="12" />
          <line x1="4" y1="18" x2="20" y2="18" />
        </svg>
      </button>

      <!-- Menu mobile dÃ©roulant -->
      <nav id="mobile-menu" role="navigation" aria-label="Menu principal" class="md:hidden hidden flex flex-col items-center bg-crÃ¨me dark:bg-[#333] text-vertSauge dark:text-[#f3f3f3] text-lg px-6 py-4 space-y-3 text-center">
        <ul class="space-y-3">
          <li><a href="{{ path('category_snacks') }}" class="hover:text-bleuMenthe">Snacks</a></li>
          <li><a href="{{ path('category_douceurs') }}" class="hover:text-bleuMenthe">Douceurs</a></li>
          <li><a href="{{ path('category_packs') }}" class="hover:text-bleuMenthe">Packs & Coffrets</a></li>
          <li><a href="{{ path('app_about') }}" class="hover:text-bleuMenthe">Qui sommes-nous</a></li>
          <li><a href="{{ path('app_contact') }}" class="hover:text-bleuMenthe">Contact</a></li>
        </ul>
      </nav>

    </div>

    <div class="container mx-auto px-4 flex items-center justify-between">

      <!-- Logo desktop -->
      <a href="{{ path('app_home') }}" class="flex-shrink-0 hidden md:block" aria-label="Page d'accueil">
        <img src="/images/logo.png" alt="Logo Leila Snacks et Douceurs" width="130" height="130"
          class="mx-auto rounded mb-2" />
      </a>

      <!-- Menu principal desktop -->
      <nav role="navigation" aria-label="Menu principal" class="w-full p-0 m-0 text-vertSauge dark:text-jaunePale hidden md:flex flex-1 justify-center items-center space-x-6 font-medium">
       <ul class="flex space-x-6">
          <li><a href="{{ path('category_snacks') }}" class="hover:text-roseFonce dark:hover:text-menthe transition-colors duration-200">Snacks</a></li>
          <li><a href="{{ path('category_douceurs') }}" class="hover:text-roseFonce dark:hover:text-menthe transition-colors duration-200">Douceurs</a></li>
          <li><a href="{{ path('category_packs') }}" class="hover:text-roseFonce dark:hover:text-menthe transition-colors duration-200">Packs & Coffrets</a></li>
          <li><a href="{{ path('app_about') }}" class="hover:text-roseFonce dark:hover:text-menthe transition-colors duration-200">Qui sommes-nous</a></li>
          <li><a href="{{ path('app_contact') }}" class="hover:text-roseFonce dark:hover:text-menthe transition-colors duration-200">Contact</a></li>
        </ul>
      </nav>

      <!-- Zone droite (desktop) -->
      <div class="flex items-center space-x-4 text-vertSauge">
        <form method="get" action="{{ path('app_home') }}" class="bg-white dark:bg-[#4A403D]  flex items-center">
          <label for="search-input" class="sr-only">Rechercher</label>
          <input type="text" name="q" value="{{ app.request.get('q') }}" placeholder="Rechercher..." class="border border-gray-300 dark:border-[#4A403D] rounded-l px-3 py-1 text-sm w-36 focus:outline-none focus:ring focus:ring-rose-300" />
          <button type="submit" class="bg-white dark:bg-[#333] border border-gray-300 rounded-r px-2 py-1">
            <img src="/images/search.webp" alt="Rechercher" loading="lazy" aria-label="Rechercher" width="36" height="36" class="w-5 h-5 dark:bg-[#333]" />
          </button>
        </form>

        {% if app.user %}

        {% if is_granted('ROLE_ADMIN') %}
            <a href="{{ path('admin_index') }}" class="flex items-center space-x-2 text-red-700 hover:underline transition" aria-label="AccÃ¨s administrateur">
                <i class="fas fa-user-shield mr-1"></i><span>Admin</span>
            </a>
        {% else %}
            <a href="{{ path('app_user_dashboard') }}" class="flex items-center space-x-2 text-red-700 hover:underline transition" aria-label="Mon compte">
              <i class="fas fa-user-circle mr-1"></i>
            </a>
        {% endif %}
       
         <a href="{{ path('app_user_dashboard') }}" class="flex items-center space-x-2 text-emerald-600 hover:underline transition">
            {{ app.user.email }} </a>
          <form method="post" action="{{ path('app_logout') }} ">
            <button type="submit" class="flex items-center space-x-2 text-vertSauge hover:opacity-80 transition" aria-label="Se dÃ©connecter">
              <img src="/images/logout.webp" alt="Se dÃ©connecter" loading="lazy" width="30" height="30" class="w-6 h-6" />
            </button>
          </form>

        {% else %}
        <a href="{{ path('app_login') }}" class="flex items-center space-x-2 text-vertSauge hover:opacity-80 transition">
          <img src="/images/login.webp" alt="Se connecter" loading="lazy" width="36" height="36" class="w-6 h-6" />
        </a>
        {% endif %}

        <!-- Panier avec compteur -->
        <a href="{{ path('cart_show') }}" class="relative hover:opacity-80 transition" aria-label="Mon panier">
          <img src="/images/panier-vide.webp" alt="Mon panier" loading="lazy" width="60" height="50" class="w-8 h-8" />
          <span id="cart-count" aria-live="polite" class="absolute top-0 right-0 bg-roseFonce text-white rounded-full text-xs w-5 h-5 flex items-center justify-center font-bold {{ cartItemCount == 0 ? 'hidden' : '' }}">{{ cartItemCount }}</span>
        </a>

        <button id="theme-toggle" aria-label="Changer de thÃ¨me" aria-pressed="false"
          class="w-6 h-6 flex items-center justify-center rounded-full bg-white dark:bg-[#333] shadow-md transition text-black dark:text-white">
          <span id="theme-icon" class="text-lg">ðŸŒ™</span>
        </button>

      </div>

    </div>
     
  </header>